https://en.wikipedia.org/wiki/Bus_error

# Bus Error - Summary

## What is a Bus Error?

A **bus error** is a hardware-level fault that occurs when your program tries to access memory in a way that the CPU physically cannot handle. Think of it like trying to mail a letter to an address that doesn't exist, or trying to fit a square peg into a round hole at the hardware level.

## Key Points

### 1. **Hardware vs Software Issue**
- Bus errors are raised by **hardware**, not just software logic
- The CPU detects that something is physically impossible
- On POSIX systems (Linux, macOS, etc.), this sends a `SIGBUS` signal to your program

### 2. **Main Causes**

#### **Non-existent Physical Address**
- Your program tries to access a memory address that doesn't physically exist
- Like asking for a house number that was never built
- The CPU puts the address on its "address bus" and nobody responds

#### **Unaligned Memory Access** (Most Common)
- Most CPUs can read individual bytes from any address
- But when reading larger chunks (16-bit, 32-bit, 64-bit values), they must be **aligned** to specific boundaries
- **Example**: If 32-bit values must be aligned to 4-byte boundaries:
  - ✅ Addresses 0, 4, 8, 12 work (aligned)
  - ❌ Addresses 1, 2, 3, 5, 6, 7 don't work (unaligned)
- Trying to read a 32-bit integer from address 1 causes a bus error

#### **Paging Errors**
- Virtual memory pages that can't be loaded
- Common when:
  - A memory-mapped file disappears while your program is running
  - A file gets truncated while your program is using it
  - Disk is full and can't allocate memory

#### **Non-present Segment (x86 only)**
- Older x86 architecture issue with segmentation
- Rare in modern programming

## Bus Error vs Segmentation Fault

- **Segmentation Fault**: Logical/permission problem (accessing memory you're not allowed to)
- **Bus Error**: Physical/hardware problem (accessing memory in a way that's physically impossible)

Bus errors are much rarer than segmentation faults in modern programming.

## Real-World Example

```c
// This code causes a bus error on systems with strict alignment
char *cptr = malloc(sizeof(int) + 1);  // Get memory
int *iptr = (int *) ++cptr;             // Move pointer by 1 byte (now misaligned!)
*iptr = 42;                              // BOOM! Bus error - trying to write 32-bit int to unaligned address
```

## Why It Matters

- Most modern systems (especially x86/x64) are lenient with alignment
- But embedded systems, ARM processors, and some architectures are strict
- Understanding this helps debug low-level memory issues
- Important for systems programming, device drivers, and embedded development

## Takeaway

A bus error means your program asked the hardware to do something it **physically cannot do** - like trying to read a 4-byte integer starting at an odd address. It's the hardware saying "I literally cannot do that" rather than "you're not allowed to do that."

